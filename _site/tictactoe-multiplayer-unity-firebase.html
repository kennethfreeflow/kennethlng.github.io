<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Kenneth Ng

	Personal Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.png">
	<title>TicTacToe – Kenneth Ng</title>
	<meta name="description" content="Online, multiplayer turn-based strategy game.">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="TicTacToe – Kenneth Ng">
	<meta name="twitter:description" content="Online, multiplayer turn-based strategy game.">
	<meta name="twitter:image:src" content="http://localhost:4000/images/projects/tictactoe/tictactoe-cover.png">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="TicTacToe – Kenneth Ng" />
	<meta property="og:description" content="Online, multiplayer turn-based strategy game." />
	<meta property="og:image" content="http://localhost:4000/images/projects/tictactoe/tictactoe-cover.png" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Muli:300,400,600,700" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70825627-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-70825627-2');</script>
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/tictactoe-multiplayer-unity-firebase">


	<header class="header">

	<div class="wrap">

		
		<a href="/" class="header__title">
			Kenneth Ng
		</a>
		

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link">Projects</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/cases" class="menu__list__item__link">Cases</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
				</ul>
			</div>
		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="TicTacToe – Kenneth Ng">

			<section class="hero hero--single">

	<div class="hero__image" style="background-image: url(/images/projects/tictactoe/tictactoe-cover.png)">
		<div class="hero__overlay"></div>
	</div>

	<div class="wrap">

		<h1>TicTacToe</h1>
		<p>Unity, Firestore, Cloud Functions, Node.js</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<article class="single-post">

			<p>This is a cross-platform game prototype leveraging Unity and Firebase to create an online, multiplayer turn-based strategy game.</p>

<p>For the client-side Unity game repository:</p>

<p><a href="https://github.com/kennethlng/tictactoe-multiplayer" class="button button--large">See tictactoe-multiplayer on Github</a></p>

<p>And for the backend Cloud Functions repository:</p>

<p><a href="https://github.com/kennethlng/tictactoe-multiplayer-cloud-functions" class="button button--large">See tictactoe-multiplayer-cloud-functions on Github</a></p>

<h2 id="stack">Stack</h2>

<p>I used Unity for the client-side game, Firebase Firestore for the database, and Cloud Functions for handling backend logic. Since TicTacToe is a turn-based stategy game, players could technically take turns at anytime. No real-time multiplayer networking is needed, so I opted to use Firestore as the serverless database. The game clients can read and write data directly to Firestore, and Cloud Functions trigger functions will respond to changes in the data and handle the matchmaking and game-winning logic.</p>

<h2 id="installation">Installation</h2>

<ol>
  <li>Open the <code class="highlighter-rouge">tictactoe-multiplayer</code> project in Unity.</li>
  <li>Build the game for iOS. Unity will create an Xcode project.</li>
  <li>Open the Xcode project. Make sure to open <code class="highlighter-rouge">Unity-iPhone.xcworkspace</code> and not <code class="highlighter-rouge">Unity-iPhone.xcodeproj</code>.</li>
  <li>Connect your iPhone.</li>
  <li>Select your phone in the list of available devices and build the game.</li>
</ol>

<p>While building the game in Xcode you may experience some build errors for missing dependencies. Remember to update the cocoapods by opening Terminal, locating the project folder for the Xcode project, and performing a <code class="highlighter-rouge">pod update</code>.</p>

<h2 id="how-to-play">How to Play</h2>

<p>Click on the <strong>Find Match</strong> button to initiate a matchmaking request. This automatically places you in a queue until another player makes a matchmaking request and a match is created. A list of available matches will be shown on the screen. To begin the game, click <strong>Play</strong> on one of the available matches.</p>

<p>When the game begins, the upper panel will indicate whether you have been assigned the “X” or “O” mark and whose turn it is each round (as judged by the blue underline). Players take turns placing a mark on the 3x3 grid. When it is your turn, tap on any of the empty grid spaces to place your mark. The first player to have a vertical, horizontal, or diagonal line of marks wins the game.</p>

<p>Once the game is over, you can return to the lobby to find another match by pressing <strong>Play again</strong>.</p>

<h2 id="how-it-works">How It Works</h2>

<h3 id="signing-in">Signing In</h3>

<p>For simplicity’s sake, I used Firebase Authentication’s anonymous sign-in.</p>

<h3 id="matchmaking">Matchmaking</h3>

<p>When the <a href="#lobbyscene"><code class="highlighter-rouge">LobbyScene</code></a> opens, the <code class="highlighter-rouge">LobbyManager</code> starts listening for available <a href="#matches">matches</a> for the player to play.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  LobbyManager.cs</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">OnEnable</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">MatchesStore</span><span class="p">.</span><span class="n">OnMatchesUpdated</span> <span class="p">+=</span> <span class="n">HandleMatchesUpdated</span><span class="p">;</span>
    <span class="n">matchesStore</span><span class="p">.</span><span class="nf">ListenMatches</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  MatchesStore.cs</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">ListenMatches</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//  Get the signed-in user's ID</span>
    <span class="kt">string</span> <span class="n">userId</span> <span class="p">=</span> <span class="n">FirebaseAuth</span><span class="p">.</span><span class="n">DefaultInstance</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">UserId</span><span class="p">;</span> 

    <span class="c1">//  Listen for active matches where the user is a player </span>
    <span class="n">Query</span> <span class="n">query</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"matches"</span><span class="p">).</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="n">userId</span><span class="p">,</span> <span class="k">true</span><span class="p">).</span><span class="nf">WhereEqualTo</span><span class="p">(</span><span class="s">"isActive"</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
    <span class="n">listener</span> <span class="p">=</span> <span class="n">query</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="n">snapshot</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">List</span><span class="p">&lt;</span><span class="n">Match</span><span class="p">&gt;</span> <span class="n">matches</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Match</span><span class="p">&gt;();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">DocumentSnapshot</span> <span class="n">documentSnapshot</span> <span class="k">in</span> <span class="n">snapshot</span><span class="p">.</span><span class="n">Documents</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Match</span> <span class="n">match</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Match</span><span class="p">(</span><span class="n">documentSnapshot</span><span class="p">);</span>
            <span class="n">matches</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">match</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="c1">//  Broadcast event with the list of matches</span>
        <span class="n">OnMatchesUpdated</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">matches</span><span class="p">);</span> 
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If a match is available it will be populated on the screen, and the player can click on it to initiate the game. The match ID is saved to a <code class="highlighter-rouge">ScriptableObject</code> so that it can be accessed by the <code class="highlighter-rouge">GameManager</code> in the <a href="#gamescene"><code class="highlighter-rouge">GameScene</code></a>. When a match in the list of available matches is selected by the player, the <code class="highlighter-rouge">StateManager</code> in the <a href="#persistentscene"><code class="highlighter-rouge">PersistentScene</code></a>, which is listening for the <a href="#onmatchselected"><code class="highlighter-rouge">OnMatchSelected</code></a> event, tells the <code class="highlighter-rouge">SceneController</code> to begin loading the <a href="#gamescene"><code class="highlighter-rouge">GameScene</code></a>.</p>

<p>If there are no matches available, the player can submit a matchmaking request (create a <a href="#queues"><code class="highlighter-rouge">queue</code></a>).</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  QueuesStore.cs</span>

<span class="k">public</span> <span class="n">Task</span> <span class="nf">CreateQueue</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//  Get the signed-in user's ID</span>
    <span class="kt">string</span> <span class="n">userId</span> <span class="p">=</span> <span class="n">FirebaseAuth</span><span class="p">.</span><span class="n">DefaultInstance</span><span class="p">.</span><span class="n">CurrentUser</span><span class="p">.</span><span class="n">UserId</span><span class="p">;</span> 

    <span class="c1">//  Create a new queue document</span>
    <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">queue</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="p">{</span> <span class="s">"userId"</span><span class="p">,</span> <span class="n">userId</span> <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="n">db</span><span class="p">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"queues"</span><span class="p">).</span><span class="nf">AddAsync</span><span class="p">(</span><span class="n">queue</span><span class="p">).</span><span class="nf">ContinueWithOnMainThread</span><span class="p">(</span><span class="n">task</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">DocumentReference</span> <span class="n">newDocRef</span> <span class="p">=</span> <span class="n">task</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Added queue document with ID: "</span> <span class="p">+</span> <span class="n">newDocRef</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
        
        <span class="c1">//  Broadcast event</span>
        <span class="nf">OnQueueCreated</span><span class="p">();</span> 
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="gameplay">Gameplay</h3>

<p>A <a href="#matches"><code class="highlighter-rouge">match</code></a> document carries all the information for a given game, including whose turn it is and which mark (“O” or “X”) has been placed on each of the 9 grid spaces. Since TicTacToe is a turn-based game, each player is essentially taking turns updating the match document. Each player’s game client listens for updates to the match and therefore sees the changes happen in real-time.</p>

<p>When the <a href="#gamescene"><code class="highlighter-rouge">GameScene</code></a> opens, the <code class="highlighter-rouge">GameManager</code> starts listening for the match with the match ID provided by the lobby.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  GameManager.cs</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">OnEnable</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">matchesStore</span><span class="p">.</span><span class="nf">ListenMatch</span><span class="p">(</span><span class="n">matchId</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
    <span class="n">MatchesStore</span><span class="p">.</span><span class="n">OnMatchUpdated</span> <span class="p">+=</span> <span class="n">HandleMatchUpdated</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  MatchesStore.cs</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">ListenMatch</span><span class="p">(</span><span class="kt">string</span> <span class="n">matchId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">DocumentReference</span> <span class="n">docRef</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"matches"</span><span class="p">).</span><span class="nf">Document</span><span class="p">(</span><span class="n">matchId</span><span class="p">);</span>
    <span class="n">listener</span> <span class="p">=</span> <span class="n">docRef</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="n">snapshot</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">Match</span> <span class="n">match</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Match</span><span class="p">(</span><span class="n">snapshot</span><span class="p">);</span>
        
        <span class="c1">//  Broadcast event with the updated match</span>
        <span class="n">OnMatchUpdated</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">match</span><span class="p">);</span>
    <span class="p">});</span> 
<span class="p">}</span>
</code></pre></div></div>

<p>Each time the match is updated, the <code class="highlighter-rouge">GameManager</code> broadcasts events for the grid space marks (<a href="#onmarksupdated"><code class="highlighter-rouge">OnMarksUpdated</code></a>) and for whose turn it is (<a href="#onturnchanged"><code class="highlighter-rouge">OnTurnChanged</code></a>).</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  GameManager.cs</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">HandleMatchUpdated</span><span class="p">(</span><span class="n">Match</span> <span class="n">match</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">match</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="c1">//  Save the match </span>
    <span class="k">this</span><span class="p">.</span><span class="n">match</span> <span class="p">=</span> <span class="n">match</span><span class="p">;</span>

    <span class="c1">//  If the game is no longer active, don't run any events or game logic</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">match</span><span class="p">.</span><span class="n">isActive</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//  If the game is no longer active, run the game over logic</span>
        <span class="nf">GameOver</span><span class="p">();</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//  Broadcast event for the updated grid space marks</span>
    <span class="n">OnMarksUpdated</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">match</span><span class="p">.</span><span class="n">marks</span><span class="p">);</span> 
    
    <span class="c1">//  Broadcast event for which player's turn it is</span>
    <span class="n">OnTurnChanged</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">match</span><span class="p">.</span><span class="n">turn</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>A game is over when the <code class="highlighter-rouge">isActive</code> field of the <a href="#matches">match</a> is <code class="highlighter-rouge">false</code>. When the game is over, a game over UI pops up, and the player can press <strong>Play again</strong> to return to the lobby to find another match.</p>

<h2 id="cloud-functions-triggers">Cloud Functions Triggers</h2>

<h3 id="onqueuecreated"><code class="highlighter-rouge">onQueueCreated</code></h3>

<p>While in the lobby, players can submit matchmaking requests. Each matchmaking request creates an active queue document in the queues Firestore collection. Each time a new queue is created, the <code class="highlighter-rouge">onQueueCreated</code> trigger function will:</p>

<ol>
  <li>Clean out previous matchmaking requests from the same player by deactivating them (isActive = false).</li>
  <li>Search for active matchmaking requests from all players. For simplicity’s sake, I only looked for the 2 most recent queues to create a match. In a real-life game example, you would probably create more complex logic to match players based on level, region, etc.</li>
  <li>If two queues have been found, create a new match document between the two players.</li>
</ol>

<h3 id="onmatchupdated"><code class="highlighter-rouge">onMatchUpdated</code></h3>

<p>Each time a match is updated with new marks, the <code class="highlighter-rouge">onMatchUpdated</code> trigger function runs the backend game logic to determine whose turn it is next and whether a winner has been identified.</p>

<h2 id="events">Events</h2>

<h3 id="onsignedin"><code class="highlighter-rouge">OnSignedIn</code></h3>

<p>Called by the <code class="highlighter-rouge">AuthenticationManager</code> when the user successfully signs in.</p>

<h3 id="onsignedout"><code class="highlighter-rouge">OnSignedOut</code></h3>

<p>Called by the <code class="highlighter-rouge">AuthenticationManager</code> when the user signs out.</p>

<h3 id="onmatchselected"><code class="highlighter-rouge">OnMatchSelected</code></h3>

<p>Called by the <code class="highlighter-rouge">LobbyManager</code> when the player picks a match to play.</p>

<h3 id="onmarksupdated"><code class="highlighter-rouge">OnMarksUpdated</code></h3>

<p>Called by the <code class="highlighter-rouge">GameManager</code> when the marks are updated. Passes a List<string> of marks corresponding to the 9 grid spaces.</string></p>

<p>The mark buttons on the 9 grid spaces listen for this event and change their mark to “O” or “X” accordingly when the marks are updated.</p>

<h3 id="onturnchanged"><code class="highlighter-rouge">OnTurnChanged</code></h3>

<p>Called by the <code class="highlighter-rouge">GameManager</code> when it’s the next player’s turn. Passes the user ID of the player whose turn it is to place a mark on the grid.</p>

<p>The mark buttons on the 9 grid spaces listen for this event and disable themselves when it’s not the signed-in user’s turn. The <code class="highlighter-rouge">PlayerIndicatorPanel</code> on the UI also listens for this event to show whose turn it is.</p>

<h2 id="database">Database</h2>

<p>The Firestore database has 2 collections: <code class="highlighter-rouge">queues</code> and <code class="highlighter-rouge">matches</code>.</p>

<h3 id="queues"><code class="highlighter-rouge">queues</code></h3>

<p>A <code class="highlighter-rouge">queue</code> document has the following fields:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0cj3jkdflj2ldkfjd"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"July 6, 2020 at 12:14:45 PM UTC-7"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">userId</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Identifies the player who created the matchmaking request.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">isActive</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Determines whether the matchmaking request is currently active. This is set by the <a href="https://github.com/kennethlng/tictactoe-multiplayer-cloud-functions">Cloud Functions backend</a>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">createdOn</code></td>
      <td><code class="highlighter-rouge">timestamp</code></td>
      <td>The timestamp for when the queue was created. This is set by the <a href="https://github.com/kennethlng/tictactoe-multiplayer-cloud-functions">Cloud Functions backend</a>.</td>
    </tr>
  </tbody>
</table>

<h3 id="matches"><code class="highlighter-rouge">matches</code></h3>

<p>A <code class="highlighter-rouge">match</code> document has the following fields:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"playerO"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T2ekijVZMgOhVA48z86Vxam4XZm2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"playerX"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xTES8vbX84NbqmX10RGBScWt1Jf2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"players"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"xTES8vbX84NbqmX10RGBScWt1Jf2"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"T2ekijVZMgOhVA48z86Vxam4XZm2"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"turn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T2ekijVZMgOhVA48z86Vxam4XZm2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"winner"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"0"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"O"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"3"</span><span class="p">:</span><span class="w"> </span><span class="s2">"X"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"O"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"5"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"6"</span><span class="p">:</span><span class="w"> </span><span class="s2">"X"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"7"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"8"</span><span class="p">:</span><span class="w"> </span><span class="s2">"O"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"July 6, 2020 at 01:25:42 PM UTC-7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"modifiedOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"July 8, 2020 at 10:05:31 PM UTC-7"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">isActive</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Determines whether the match is currently active. A match is active when it is first created. The match is set inactive when the game ends.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">turn</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>The user ID of the player whose turn it is. This field helps the clients determine whose turn it is and whether or not to disable input from the player. The <a href="https://github.com/kennethlng/tictactoe-multiplayer-cloud-functions">Cloud Functions backend</a> determines whose turn it is.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">playerO</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>The user ID of the player whose mark is “O”.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">playerX</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>The user ID of the player whose mark is “X”.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">winner</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>The user ID of the winning player, if there is a winner. If there is no winner, this field is left blank.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">players</code></td>
      <td><code class="highlighter-rouge">object</code></td>
      <td>This field is used on the client side for querying matches that the signed-in user is a member of.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">marks</code></td>
      <td><code class="highlighter-rouge">object</code></td>
      <td>An object mapping representing the 9 grid spaces in a TicTacToe game. This field is updated each time a player places a new mark on the grid.</td>
    </tr>
  </tbody>
</table>

<h2 id="scenes">Scenes</h2>

<h3 id="persistentscene"><code class="highlighter-rouge">PersistentScene</code></h3>

<p>Loads the individual scenes in and out according to the state of the game.</p>

<blockquote>
  <p>I highly recommend checking out Unity’s <a href="https://assetstore.unity.com/packages/essentials/tutorial-projects/adventure-sample-game-76216">Adventure - Sample Game</a> project for an example implementation of this.</p>
</blockquote>

<h3 id="authenticationscene"><code class="highlighter-rouge">AuthenticationScene</code></h3>

<p>Handles the logic for signing in the player anonymously.</p>

<h3 id="lobbyscene"><code class="highlighter-rouge">LobbyScene</code></h3>

<p>Handles the logic for <a href="#matchmaking">matchmaking</a>.</p>

<h3 id="gamescene"><code class="highlighter-rouge">GameScene</code></h3>

<p>Handles the <a href="#gameplay">gameplay</a> logic.</p>


			<hr>

			<a href="https://twitter.com/kennethlng" class="button button--large">Connect on Twitter @KennethLNg</a>

		</article>

	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<div class="wrap">

		<!-- <p class="footer__text">Kenneth Ng</p> -->

		<div class="footer__copyright">
			<span>© 2020 Kenneth Ng</span>
			<!-- <a href="https://jekyllthemes.io" target="_blank">Jekyll Themes</a> -->
		</div>

		<ul class="socials">
	
	
	
	
	<li class="socials__item">
		<a href="https://twitter.com/kennethlng" target="_blank" class="socials__item__link" title="Twitter">
			<i class="fab fa-twitter" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	<li class="socials__item">
		<a href="https://www.instagram.com/kennethleeng/" target="_blank" class="socials__item__link" title="Instagram">
			<i class="fab fa-instagram" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://medium.com/kennethlng" target="_blank" class="socials__item__link" title="Medium">
			<i class="fab fa-medium" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/kennethlng" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/kennethlng/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/personal-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>